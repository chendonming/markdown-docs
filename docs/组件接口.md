# 组件接口

> 本教程需要 vue 的开发知识以及一个可用的 Token
> 最后更新时间：2025 年 7 月 18 日 15 点 29 分

## 示例

> 你需要获取`pit-bimwin-ui`的包，请咨询 BimWin 部门

显示模型很简单，只需要在 vue 中引入`pit-bim-win-ui`组件并配置好参数即可，以下是参考例子：

```vue
<template>
    <pit-bim-win-ui ref="pitBimWinUi" :options="options" :headers="headers"></pit-bim-win-ui>
</template>

<script>
export default {
    data() {
        return {
            options: {
                fileId: ["1686998156242710529"],
                url: "http://172.18.3.3:18181/",
                apiVersion: 3, // 获取文件信息的API版本，以下会详细说明
            },
            headers: {
                token: "Bearer eyJraWQiOiJjODRhOTUxYWZjZTBiNmE0ZGU2N2Q5NmViMjM2MjJlZSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZG1pbiIsImF1ZCI6ImJpbXdpbi1jbG91ZCIsIm5iZiI6MTY5NjgxNDA2NSwic2NvcGUiOlsib3BlbmlkIl0sImlzcyI6Imh0dHA6XC9cLzEyNy4wLjAuMTo4Nzg4IiwiZXhwIjoxNjk2ODU3MjY1LCJpYXQiOjE2OTY4MTQwNjV9.FoFfPkKf51muLNmpFeHHWx-mignrXl2OyzqEnhwIt3IO0f6anBAd1r2tU_iAyiSKRjN79nlAdJ-OmGYrdwFHdMiHXyGunDSPPTmqgEPA1dnlZ_VA6K2XoQ_oH-WAwMtVw9Qt6sKLEBnZ9fXhUsOuvYn5UwZGn57l4U5A7ZsciqgQLkUd0iNdTcZY0YJdR0U-4Wkaou7FNBUEwQS-qNedxMmolTbE1bG9uTeWfR2lFucGbNjKZpfkvr_jA_xydXwrrTEu7L2zTTpaVneY-4gdZX_ODqyKiCHuQ-n2js4-TOAYd2vN3QnsHlLbb5kWm7cQ1IaG-Du_8b37wPz0ny68Iw",
            },
        };
    },
};
</script>
```

## 属性

| 参数名                                   | 类型        | 描述                                           |
| :--------------------------------------- | ----------- | :--------------------------------------------- |
| [options](#options-属性字段说明)         | object      | 组件配置项                                     |
| [headers](#headers-属性字段说明)         | object      | 服务端调用 header                              |
| [visibleToolbar](#visibletoolbarid-说明) | array\|null | 指定显示的底部功能按钮                         |
| [hiddenToolbar](#visibletoolbarid-说明)  | array\|null | 指定隐藏的底部功能按钮                         |
| [customToolbar](#customtoolbar-说明)     | array\|null | 自定义的底部功能按钮                           |
| [menuRight](#menuright-说明)             | array       | 自定义的右键菜单                               |
| [hiddenMenuRight](#hiddenMenuRight-说明) | array       | 指定隐藏的右键菜单                             |
| debugUI                                  | boolean     | 是否开启调试信息窗（包含当前 FPS、内存等信息） |

#### options 属性字段说明

| 参数名                        | 类型                                         | 描述                                          |
| ----------------------------- | -------------------------------------------- | --------------------------------------------- |
| url                           | string                                       | 服务端接口调用地址                            |
| [modelUrl](#第三人称漫游说明) | string                                       | 第三人称漫游模型地址                          |
| [fileId](#fileid-说明)        | string\|array\|object                        | 模型 id                                       |
| selectMode                    | 'nochoice'\|'singlechoice'\|'multiplechoice' | 点选模式                                      |
| isShowLine                    | boolean                                      | 是否显示线框                                  |
| isShowOutline                 | boolean                                      | 鼠标悬停时是否显示轮廓                        |
| navaxis                       | [CSSStyleObject](#导向体-css-说明)\| string  | 导向体的 CSS 属性                             |
| rotateAround                  | "near" \| "center"(default="center")         | 左键旋转时采取的模式                          |
| loadLineMesh                  | boolean                                      | 是否加载线框                                  |
| [navType](#导向体类型说明)    | 'revit' \| 'origin'                          | 导向体类型                                    |
| browseMode                    | "Viewport" \| "TransformGizmo"               | 浏览类型(正常/位置调整)                       |
| axesHeler                     | boolean                                      | 是否显示坐标辅助(默认 false)                  |
| proxyDataUrl                  | string                                       | 数据文件的主机地址，方便项目做代理            |
| proxyGisDataUrl               | string                                       | 同`proxyDataUrl`,包括倾斜摄影，gis 地图，地形 |
| lod                           | boolean                                      | 是否是 LOD 渲染                               |
| isCombine                     | boolean                                      | 是否是集成模型                                |

##### fileId 说明

fileId 允许以下格式调用

-   string

    ```js
    fileId: "1686998156242710529";
    ```

-   array\<string\>
    ```js
    fileId: ["1686998156242710529"];
    ```
-   object
    ```js
    fileId: {
      id: '1686998156242710529',
      viewDirection: 0b100101,
      fitView: true,
      sceneMatrix: new THREE.Matrix4(),
    }
    ```
-   array\<object\>
    ```js
    fileId: [
        {
            id: "1686998156242710529",
            viewDirection: 0b100101,
            fitView: true,
            sceneMatrix: new THREE.Matrix4(),
        },
    ];
    ```

其中`object`类型的参数可以配置的参数如下:

```ts
interface ModelOptions {
    sceneMatrix?: THREE.Matrix4 | number[]; // 场景偏移
    fitView: boolean; // 聚焦到场景中心
    viewDirection: ViewDirection; // 视角
    viewLayout2d?: boolean; // 查看布局，二维cad中使用
    nodeIdPrefix?: string; // 构件Id前缀
    id?: string; //文件id
}
```

ViewDirection 预订了一些视角， 如下所示:

```ts
enum ViewDirection {
    Left /*           */ = 0b100000,
    Right /*          */ = 0b010000,
    Down /*           */ = 0b001000,
    Up /*             */ = 0b000100,
    Back /*           */ = 0b000010,
    Front /*          */ = 0b000001,

    LeftDown /*       */ = 0b101000,
    LeftUp /*         */ = 0b100100,
    LeftBack /*       */ = 0b100010,
    LeftFront /*      */ = 0b100001,

    RightDown /*      */ = 0b011000,
    RightUp /*        */ = 0b010100,
    RightBack /*      */ = 0b010010,
    RightFront /*     */ = 0b010001,

    DownBack /*       */ = 0b001010,
    DownFront /*      */ = 0b001001,
    UpBack /*         */ = 0b000110,
    UpFront /*        */ = 0b000101,

    LeftDownBack /*   */ = 0b101010,
    LeftDownFront /*  */ = 0b101001,
    LeftUpBack /*     */ = 0b100110,
    LeftUpFront /*    */ = 0b100101,

    RightDownBack /*  */ = 0b011010,
    RightDownFront /* */ = 0b011001,
    RightUpBack /*    */ = 0b010110,
    RightUpFront /*   */ = 0b010101,
}
```

> tip: `THREE`可以从`pitBimwinUi`中获取

```js
import ui from "pit-bimwin-ui";
const THREE = ui.THREE;
```

##### 第三人称漫游说明

在漫游功能如果需要开启第三人称漫游需要指定人物模型地址，如:

```json
options: {
  fileId: ["1686998156242710529"],
  url: "http://172.18.3.3:18181/",
  modelUrl: "/person.glb",
},
```

通常模型会存放在项目的静态资源目录中（ vue2 通常是 public 文件夹 ）, 你只需要指定路径即可。

[点击下载人物模型](http://172.18.3.3:2801/loader/bimwin/person.glb)

##### 导向体 css 说明

导向体支持`string`和`CSSStyleObject`两种方式

如果是`string`那么样式会直接覆盖导向体的`cssText`

如果是`CSSStyleObject`那么只会取存在值的那一个 key, 示例如下:

```js
navaxis: {
  left: null,
  top: "200px",
  right: "10px",
  bottom: "",
  display: "",
  width: "",
  height: ""
},
```

针对如上示例, 生效的只会是`top`和`right`

##### 导向体类型说明

```typescript
{
    ......
    // 不配置默认基本类型
    navType: string, // "revit" - revit类型, "origin" - 基本类型
}
```

#### headers 属性字段说明

```js
headers: {
  token: "Bearer eyJraWQiOiJjODRhOTUxYWZjZTBiNmE0ZGU2N2Q5NmViMjM2MjJlZSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJhZG1pbiIsImF1ZCI6ImJpbXdpbi1jbG91ZCIsIm5iZiI6MTY5NjgxNDA2NSwic2NvcGUiOlsib3BlbmlkIl0sImlzcyI6Imh0dHA6XC9cLzEyNy4wLjAuMTo4Nzg4IiwiZXhwIjoxNjk2ODU3MjY1LCJpYXQiOjE2OTY4MTQwNjV9.FoFfPkKf51muLNmpFeHHWx-mignrXl2OyzqEnhwIt3IO0f6anBAd1r2tU_iAyiSKRjN79nlAdJ-OmGYrdwFHdMiHXyGunDSPPTmqgEPA1dnlZ_VA6K2XoQ_oH-WAwMtVw9Qt6sKLEBnZ9fXhUsOuvYn5UwZGn57l4U5A7ZsciqgQLkUd0iNdTcZY0YJdR0U-4Wkaou7FNBUEwQS-qNedxMmolTbE1bG9uTeWfR2lFucGbNjKZpfkvr_jA_xydXwrrTEu7L2zTTpaVneY-4gdZX_ODqyKiCHuQ-n2js4-TOAYd2vN3QnsHlLbb5kWm7cQ1IaG-Du_8b37wPz0ny68Iw",
  anyheader: "i can custom request headers!"
}
```

| 参数名   | 类型     | 描述       |
| -------- | -------- | ---------- |
| token    | string   | 授权 token |
| [string] | [string] | 任意请求头 |

#### visibleToolbarId 说明

| id                     | 描述             | 分组   | 图标/图片 |
| ---------------------- | ---------------- | ------ | --------- |
| mainPerspective        | 主视角           | group1 | icon      |
| currentMainPerspective | 设置当前为主视图 | group1 | icon      |
| resetMainPerspective   | 重置主视图       | group1 | icon      |
| zoomUp                 | 框选放大         | group1 | icon      |
| directoryTree          | 目录树           | group1 | icon      |
| fullScreen             | 全屏             | group1 | icon      |
| measurement            | 测量             | group2 | icon      |
| section                | 剖切             | group2 | icon      |
| axialSection           | 轴向剖切         | group2 | icon      |
| roamingMode            | 漫游模式         | group2 | icon      |
| componentDetails       | 构件属性         | group2 | icon      |
| search                 | 搜索             | group2 | icon      |
| layer                  | 图层             | group2 | icon      |
| annotation             | 批注             | group2 | icon      |
| label                  | 标签             | group2 | icon      |
| explode                | 模型爆炸         | group2 | icon      |
| setUp                  | 设置             | group3 | icon      |
| minimap                | 小地图           | group3 | icon      |
| basicInformation       | 基本信息         | group3 | icon      |

#### customToolbar 说明

可以添加自定义按钮至底部栏， 示例如下:

```js
customToolbar: [
  {
    grouping: "group1",
    offset: 1,
    id: "test",
    type: "text",
    text: "测试"
    title: "测试",
    isShow: true,
    showMobileTerminal: true,
    callback: () => {
      alert("专业测试");
    },
  },
]
```

值得说明的是， 其中的`offset`参数可以决定，这个按钮所在`group`的位置， 比如上面的示例，会创建一个名为`测试`的按钮，这个按钮会在`group1`按钮组中处于第一位（ 从`1`开始而不是`0` ）。

按钮的风格可以分为`img`, `icon`, `text`, 其中需要注意的如下:

-   `img`风格需要 `imgHoverPath`和`imgPath`, 代表 hover 时的图片和正常展示的图片，支持`base64`
-   `icon`风格需要`class`, 代表所展示的字体样式， 例如: `iconfont`,`fs`等
-   `text`风格需要`text`用来展示文字，但是最多`2`位，其他需要提示的信息可以写在`title`中。
-   `btn-primary`风格是一个通常样式按钮
-   `btn-default`风格是一个默认样式按钮

#### menuRight 说明

可以添加自定义菜单至右键菜单， 示例如下:

```js
menuRight: [
    {
        title: "右键菜单1",
        offset: 2,
        grouping: "custom1",
        when: "nodeSelected",
        callback: () => {
            alert("菜单功能1");
        },
    },
    {
        title: "右键菜单2",
        offset: 1,
        grouping: "custom1",
        when: "isMeasure",
        callback: () => {
            alert("菜单功能2");
        },
    },
];
```

其中, `offset`参数决定所在`grouping`的位置， 比如上面的示例，会创建一个名为`右键菜单1`的右键按钮，这个按钮会在`custom1`按钮组中处于第`2`位（ 从`1`开始而不是`0` ）。其次, `when`参数指定按钮显隐的条件, 比如上面的示例, `右键菜单1`的 when 参数值为`nodeSelected`, 说明该按钮的显示/隐藏与构件选中与否对应, 支持的 when 参数值与说明如下所示:

tip: `offset`必填， 系统默认右键菜单的 grouping 为`default`

| 值            | 描述           |
| ------------- | -------------- |
| nodeSelected  | 构件是否选中   |
| ~~isMeasure~~ | ~~是否测量时~~ |

#### hiddenMenuRight 说明

可隐藏不想显示的右键菜单，包括自定义的与默认菜单，示例如下:

```js
hiddenMenuRight: [
  "构件详情",
  "自定义菜单1",
  ...
]
```

其中，数组值为右键菜单名，即右键菜单`title`属性。

#### appStyle 说明

组件内置了几种界面风格，可通过配置组件属性 appStyle 设置：

```vue
<pit-bim-win-ui ref="bimwin" class="flex-1 flex overflow-auto" appStyle="light" :options="options" :headers="headers" />
```

可设置的值如下：

| 值           | 描述             |
| ------------ | ---------------- |
| default      | 默认经典黑色风格 |
| light        | 白色明亮风格     |
| big-screen-1 | 大屏风格 1       |

## 方法

| 方法名                    | 参数                                                   | 返回值                                 | 描述                                                                                     |
| ------------------------- | ------------------------------------------------------ | :------------------------------------- | ---------------------------------------------------------------------------------------- |
| getAllNodesIds            | <空>                                                   | string[]                               | 获取所有构件 id                                                                          |
| getSelectNodesProperties  | <空>                                                   | [properties[]](#properties-说明)       | 获取当前选中构件属性                                                                     |
| getClickNodeId            | <空>                                                   | string[]                               | 获取选中构件 id                                                                          |
| getPropertiesByNodesIds   | string[]                                               | [properties[]](#properties-说明)       | 根据传入构件 id 获取对应属性                                                             |
| setNodesColor             | string[],[color](#color-说明),boolean                  | <空>                                   | 设置构件颜色                                                                             |
| setNodesColorAndOpacity   | string[],[color](#color-说明),number,boolean,boolean   | <空>                                   | [具体见说明](#setnodescolorandopacity-说明)                                              |
| setNodesBlink             | string[],[color](#color-说明),number,boolean           | <空>                                   | [设置构件闪烁](#setnodesblink-说明)                                                      |
| focusNodes                | string[]                                               | <空>                                   | 聚焦构件                                                                                 |
| ~~fitElements~~           | ~~string[]~~                                           | ~~<空>~~                               | ~~聚焦构件~~                                                                             |
| getNodeInfoById           | string                                                 | <空>                                   | 根据传入构件 id 获取对应节点信息                                                         |
| showNodes                 | string[],boolean                                       | <空>                                   | 设置构件显示/隐藏                                                                        |
| showAllNodes              | boolean                                                | <空>                                   | 设置所有构件显示/隐藏                                                                    |
| setOtherNodesHide         | string[]                                               | <空>                                   | 设置其他构件隐藏                                                                         |
| getView                   | <空>                                                   | [CameraData](#cameradata-相机信息说明) | 返回当前视角信息                                                                         |
| setView                   | [CameraData](#cameradata-相机信息说明)                 | <空>                                   | 设置当前视角为传入视角                                                                   |
| setMainView               | [CameraData](#cameradata-相机信息说明),boolean,boolean | <空>                                   | 设置主视角                                                                               |
| resetView                 | <空>                                                   | <空>                                   | 重置主视角                                                                               |
| setCSSVar                 | string,string                                          | <空>                                   | [设置 bimwin :root 下的 css 变量](#css-变量说明)                                         |
| importLabelData           | [label[]](#label-说明)                                 | <空>                                   | [具体见下](#importlabeldata-说明)                                                        |
| clearAllLabel             | <空>                                                   | <空>                                   | 清空所有标签                                                                             |
| dispose                   | <空>                                                   | <空>                                   | 销毁`platform`                                                                           |
| importAnnotation          | json string                                            | <空>                                   | 导入批注                                                                                 |
| exportAnnotation          | <空>                                                   | json string                            | 导出批注                                                                                 |
| getPlatform               | <空>                                                   | platform                               | 获取`platform`的实例                                                                     |
| exportRoamData            | <空>                                                   | 漫游数据                               | 返回导出的漫游数据                                                                       |
| importRoamData            | 漫游数据                                               | <空>                                   | 将数据导入到漫游                                                                         |
| queryProperties           | search:key, type: string,length:number                 | 搜索的构件                             | [搜索构件 ID](#queryproperties-说明)                                                     |
| queryPropertiesByFunction | func:Function                                          | 搜索的构件                             | [搜索构件 ID](#queryproperties-说明)                                                     |
| setToolbarActive          | string[],boolean                                       | <空>                                   | 设置菜单按钮禁用,菜单值见[visibleToolbarId](#visibleToolbarId-说明)                      |
| getToolbarMenuVisible     | string                                                 | boolean                                | 获取菜单按钮 visible 状态,菜单值见[visibleToolbarId](#visibleToolbarId-说明)             |
| setToolbarMenuClose       | string[],boolean?                                      | <空>                                   | 设置菜单关闭，参数 1 为菜单值 id 列表，参数 2 表示是否清除数据(仅测量、标签面板上的数据) |
| setRoamPathFileId         | string                                                 | <空>                                   | 设置漫游路径的关联 fileId                                                                |

#### queryProperties 说明

> 作用： 根据属性名称、属性值查询出构件集合

通常一个模型拥有相同的属性的构件是非常多的，全部查询出数据可能会费时，因此**queryProperties**被设计成一个生成器函数，你需要这样来调用:

```js
var a = queryProperties("类别", "key");
a.next(); // 默认出10条数据
a.next(); // 再次调用出下一页数据 以此类推
```

更官方的关于生成器函数的说明，见此[链接](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/function*#%E6%8F%8F%E8%BF%B0)

如果想要将数据全部取出来，你需要一个*while*循环

```js
var a = queryProperties("类别", "key");
var b;
while (true) {
    b = a.next();
    // XXXXXXXXX b.value 取出数据 done 为true代表数据取尽
    if (b.done) {
        break;
    }
}
```

queryProperties 存在三个参数

-   searchValue: string 搜索的关键字
-   type: 'key'|'value'|'props' 告诉函数对于关键字是搜索 key、value 还是**key=value**的形式, 默认值是 key
-   length 生成器函数调用一次**next()**吐出多少条数据。 默认值为**10**

queryProperties 只能查询一种条件, 而**queryPropertiesByFunction**可以自定义组合条件查询, 示例如下:

```js
const arr = this.$refs.bimWin.queryPropertiesByFunction((v) => {
    return v.Props["流水号"] === "0007" && v.Props["编码"] === "10.10.50_04.02.01";
});

console.log(arr);
```

#### setNodesBlink 说明

```typescript
setNodesBlink(
  ids: string[] | string,
  color: number | string,
  speed?: number,
  clearOld?:boolean
)
```

-   speed 代表速度, 默认值 `0.005`, 构件透明度会在`[0.2, 0.9]`之间有节奏的转换, `speed`代表每次转换时的最大影响值
-   clearOld 是否清除掉之前被设置过的构件颜色

#### setNodesColorAndOpacity 说明

```js
setNodesColorAndOpacity(
    ids: string[],
    color: string | number,
    opacity = 1.0,
    closeDepthTest = false,
    clearOld = false
)
```

-   ids 构件 id 数组
-   color 颜色值
-   opacity [0-1.0]透明度
-   closeDepthTest,是否关闭深度检测。默认为 false, 代表可以被其他物体遮挡，如果设置为`true`那么此构件可以在视野中可见即使被遮挡
-   clearOld 是否清除掉之前被设置过的构件颜色

#### color 说明

`bimwin`支持的颜色如下:

-   十六进制字符串 如 `#ffffff`, `#900909`, 不要使用缩写例如：`#fff`
-   纯数字 如`1`, `200`，`0x123456`
-   html 支持的颜色的字符串 如: `red`, `yellow`等

#### label 说明

| 属性名   | 类型                                      | 描述       |
| -------- | ----------------------------------------- | ---------- |
| id       | string                                    | 唯一 id    |
| isShow   | boolean                                   | 是否展示   |
| name     | string                                    | 展示的内容 |
| position | [THREE.Vector3](#cameradata-相机信息说明) | 所在位置   |

#### importLabelData 说明

```js
const data = [
    {
        id: 1,
        isShow: true,
        name: "2222",
        position: {
            x: 38.404042617353085,
            y: 1.8539502620697164,
            z: -22.851039827513972,
        },
    },
];
this.$refs.bimWin.importLabelData(data);
```

对于上面示例中的`importLabelData`方法，会在当前场景中创建标签， 如果标签弹窗被打开，那么直接会给弹窗标签列表赋值， 适用于有弹窗和无弹窗两种情况

#### properties 说明

构件属性, 结构如下:

| 属性名 | 类型     | 描述    |
| ------ | -------- | ------- |
| Id     | string   | 构件 id |
| Groups | group[ ] | 属性组  |

其中, `Groups`是构件的属性组, 包含的每个`group`元素有一个`Name`和一个`Props`数组, `Name`代表属性组名, `Props`数组中的元素为对象, 对象属性为属性名，对应值为属性值, 示例如下:

```js
 Id: "xx.xxxxxxxxx.xxxxx",
 Groups: [
  0: {
    Name: "属性组名",
    Props: [
      属性1: "属性值",
      ...
    ]
  },
  ...
 ]
```

#### css 变量说明

| 变量名                              | 描述                  |
| ----------------------------------- | --------------------- |
| --pit-bim-win-toolbar-primary-color | 底部导航栏背景色      |
| --pit-bim-win-toolbar-border-radius | 底部导航栏边框 radius |
| --pit-bim-win-dialog-primary-color  | 弹窗 body 背景颜色    |
| --pit-bim-win-dialog-border-color   | 弹窗边框颜色          |
| --pit-bim-win-dialog-font-color     | 弹窗字体颜色          |
| --pit-bim-win-dialog-header-color   | 弹窗头部颜色          |
| --pit-bim-win-dialog-border-radius  | 弹窗边框 radius       |

## 事件

| 事件名                                  | 返回参数                                                         | 描述                                                      |
| --------------------------------------- | ---------------------------------------------------------------- | --------------------------------------------------------- |
| annotationSaveImage                     | string\<base64\>,[CameraData](#cameradata-相机信息说明),platform | 批注截图                                                  |
| labelSaveData                           | [label[]](#label-说明),platform                                  | 标签列表数据                                              |
| onModelLoaded                           | platform                                                         | 模型和属性加载完毕                                        |
| onPropertyLoaded                        | platform                                                         | 属性加载完毕                                              |
| onPickPoint                             | [Intersection](#intersection-说明),platform                      | 鼠标点击事件                                              |
| [before[menuId]](<(#菜单点击事件说明)>) | 当前菜单值                                                       | 菜单点击之前的事件                                        |
| roamingSave                             | 漫游数据                                                         | 漫游保存事件                                              |
| roamEnter                               | <空>                                                             | 漫游进入事件                                              |
| roamLeave                               | <空>                                                             | 漫游离开事件                                              |
| labelClick                              | number\|any                                                      | 标签点击事件, 非自定义返回标签 id，自定义返回自定义的内容 |

#### 菜单点击事件说明

在生成底部菜单后，在点击对应菜单之前会触发`before`事件, 比如内置目录树的 id 为`directoryTree`, 那么只需要监听`beforedirectoryTree`就可以在点击菜单之前触发事件了。
自定义的菜单也会生效。

```html
<pit-bim-win-ui @beforedirectoryTree="beforedirectoryTree"> </pit-bim-win-ui>
```

#### CameraData 相机信息说明

| 值       | 类型          | 描述       |
| -------- | ------------- | ---------- |
| position | THREE.Vector3 | 位置       |
| rotation | THREE.Euler   | 欧拉角     |
| left     | number        | 左侧面位置 |
| top      | number        | 上侧面位置 |
| right    | number        | 右侧面位置 |
| bottom   | number        | 下侧面位置 |

`THREE.Vector3`, `THREE.Euler` 包含的属性如下:

```js
{
  x: 0,
  y: 0,
  z: 0,
}
```

#### Intersection 说明

| 值                         | 类型                | 描述                       |
| -------------------------- | ------------------- | -------------------------- |
| hit                        | boolean             | 是否有相交计算结果         |
| ray                        | THREE.Ray           | 相交计算所用到的射线       |
| distance                   | number              | 射线与 Node 交点距离       |
| [node](#node-构件节点说明) | node 构件节点       | 被选中的构件节点           |
| point                      | THREE.Vector3       | 被选中 Mesh 与射线的交点   |
| uv                         | null\|THREE.Vector2 | 被选中的 Mesh 中三角面 UV  |
| faceIndex                  | number              | 被选中的 Mesh 中三角面序号 |

#### Node 构件节点说明

| 值             | 类型                                                              | 描述             |
| -------------- | ----------------------------------------------------------------- | ---------------- |
| id             | string                                                            | 唯一 id          |
| boundingBox    | [BoundingBox](#boundingbox-包围盒说明)                            | 包围盒           |
| state          | number [隐藏:-1] [高亮:0] [材质:1] [半透明:2] [着色:3] [自定义:4] | 状态值           |
| closeDepthTest | boolean                                                           | 深度检测是否关闭 |

#### BoundingBox 包围盒说明

| 值   | 类型   |
| ---- | ------ |
| minx | number |
| miny | number |
| minz | number |
| maxx | number |
| maxy | number |
| maxz | number |

## 插槽

| 插槽名               | 描述                                   |
| -------------------- | -------------------------------------- |
| default              | 展示在 bimwin 内部                     |
| componentDetails     | [构件属性插槽](#componentdetails-插槽) |
| pitDirectoryTreeTabs | 目录树标签叶插槽                       |

#### componentDetails 插槽

```html
<pit-bim-win-ui>
    <template #componentDetails="{ data }">
        <!-- data为当前展示的属性数据 -->
        <div>{{ JSON.stringify(data) }}</div>
    </template>
</pit-bim-win-ui>
```

#### pitDirectoryTreeTabs 插槽

用于在 bimwin 的目录树标签页中的自定义内容。

```vue
<pit-bim-win-ui :customDirectoryTreeTabs="customDirectoryTreeTabs">
  <template #pitDirectoryTreeTabs="[ active ]">
		<div class="tabs1" v-if="active == 'tabs1'">tabs content</div>
		<div class="tabs1" v-if="active == 'tabs2'">tabs content</div>
        <div class="tabs1" V-if="active == 'tabs3'">tabs content</div>
  </template>
</pit-bim-win-ui>

<script>
export default {
    data() {
        return {
            customDirectoryTreeJabs: ["tabs1", "tabs2"， "tabs3"]
        }
    }
}
</script>
```

## 内置组件

Form 表单系列组件， 使用这套表单组件，使风格与`bimwin`维持一致

#### PitBimWinCheckbox 复选框

```html
<pit-bim-win-checkbox :style="{ visibility: root.isCheckbox ? 'hidden' : 'visible' }" v-model="root.checked" :disabled="root.disabled" :indeterminate="root.indeterminate"> </pit-bim-win-checkbox>
```

属性

| 参数名        | 类型                        | 默认值 | 描述       |
| ------------- | --------------------------- | ------ | ---------- |
| value         | string \| number \| boolean | false  | 值         |
| label         | string \| number \| boolean | false  | 展示的值   |
| disabled      | boolean                     | false  | 是否禁用   |
| indeterminate | boolean                     | false  | 是否为半选 |

事件

| 事件名 | 返回参数 | 描述       |
| ------ | -------- | ---------- |
| change | <空>     | 值被改变时 |

#### PitBimWinRange 滑块

```html
<pit-bim-win-range v-model="lightValue" step="0.02" min="0.1" max="1.0" is-show-tip />
```

属性

| 参数名    | 类型             | 默认值 | 描述         |
| --------- | ---------------- | ------ | ------------ |
| value     | string \| number | 0      | 值           |
| step      | string \| number | 1      | 步进         |
| min       | string \| number | 1      | 最小值       |
| max       | string \| number | 16     | 最大值       |
| isShowTip | boolean          | false  | 是否展示 tip |

#### PitBimWinSwitch 开关

```html
<pit-bim-win-switch v-model="enableHover" />
```

属性

| 参数名 | 类型    | 默认值 | 描述 |
| ------ | ------- | ------ | ---- |
| value  | boolean | false  | 值   |

#### pit-bim-win-dialog 组件

展示一个带有`bimwin`风格的弹窗

```html
<pit-bim-win-dialog :visible.sync="visible1" title="自定义弹窗标题" style="width: 400px; height: 400px; left: 40px; top: 20px" :before-close="beforeClose1">
    <button @click="handleClick('massage')">调用bimWin里面的massage</button>
</pit-bim-win-dialog>
```

属性

| 参数名             | 类型     | 默认值   | 描述             |
| ------------------ | -------- | -------- | ---------------- |
| visible            | boolean  | false    | 是否显示         |
| title              | string   | '弹窗'   | 标题             |
| beforeClose        | function | () => {} | 关闭前回调       |
| isResize           | boolean  | true     | 是否支持自由拉伸 |
| needAdjustPosition | boolean  | true     | 是否自动调整位置 |
| minWidth           | number   | <空>     | 最小限制宽度     |
| minHeight          | numbe    | <空>     | 最小限制高度     |

事件

| 事件名 | 返回参数 | 描述     |
| ------ | -------- | -------- |
| close  | <空>     | 关闭弹窗 |

插槽

| 插槽名   | 返回参数 | 描述                               |
| -------- | -------- | ---------------------------------- |
| titlebar | <空>     | 弹窗顶部右侧按钮栏(除关闭按钮之外) |
